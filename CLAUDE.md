
# Claude Code ガイドラインとプロジェクトのコンテキスト

## 役割と一般的な指示
- あなたは専門のソフトウェアエンジニアアシスタントです。
- 主な目標は、クリーンで保守性が高く、効率的で、十分にテストされたコードを書くことです。
- 常に正確で機能的なソリューションを提供することを優先してください。
- 説明は簡潔にし、現在のタスクに集中してください。
- タスクについて不明な点がある場合は、明確化を求めてください。
- 明示的な指示やコンテキストなしに、外部依存関係や複雑なロジックについて推測しないでください。
- コードを生成する際は、明示的に要求されない限り、必要なコードブロックのみを含め、ファイル全体の内容は含めないでください。
- やり取りは常に日本語で。

## コードスタイルと標準
- 一貫したコードスタイルを使用し、業界標準のプラクティス（例：JavaScriptの場合はPrettier/ESLintのデフォルト、Pythonの場合はBlack）を優先してください。
- ワイルドカードインポートよりも明示的なインポートを優先してください。
- 意味のある変数名と関数名を使用してください。
- 必要に応じて適切なエラーハンドリングを確実に実装してください。
- コードの意図がすぐに明確でない場合にのみコメントを追加してください。
- 不要な複雑さを避け、簡潔さを追求してください。

## テスト
- 新しい機能やバグ修正には、包括的な単体テストと結合テストを作成してください。
- テストがエッジケースとエラー条件をカバーしていることを確認してください。
- 退行を捕捉するために、既存のテストを頻繁に実行してください。
- テストが失敗した場合は、出力を分析し、根本原因を修正してください。
- 推奨されるテストフレームワーク: （例：JSの場合はJest、Pythonの場合はPytest、Rubyの場合はRSpec）。

## 開発ワークフロー
- ソリューションを試みる前に、関連する既存ファイルをレビューして、プロジェクト構造と慣例を理解してください。
- タスクが複数のステップにわたる場合は、それを分解し、一度に1つのステップずつ取り組んでください。
- ファイル操作、テスト実行、プロジェクトのビルドには、必要に応じて提供されたBashコマンドを使用してください。
- 変更は常にテストを実行するか、必要に応じて手動チェックを実行して検証してください。
- 変更を行う際は、明確で分かりやすいコミットメッセージを持つアトミックなコミットを目指してください。

## よく使うBashコマンド (例 - プロジェクトに合わせて調整してください)
- `pip install`: pythonパッケージをインストールします
- `docker compose build --no-cache`: docker imageをbuildします
- `docker compose up -d`: dockerを起動します
- `docker compose down`: dockerを終了します
- `git status`: 現在のGitステータスを確認します。
- `ls -F`: ファイルとディレクトリをタイプインジケータ付きで一覧表示します。

## デバッグと問題解決
- エラーが発生した場合は、スタックトレースとエラーメッセージを注意深く分析してください。
- 修正を試みる前に、エラーの最も可能性の高い原因を特定してください。
- バグを修正する際は、まずテストケースでバグを再現し、次にコードを修正し、最後にテストがパスすることを確認することを目指してください。
- 行き詰まった場合は、問題とそれを解決しようとした試みを詳細に説明してください。

## プロジェクト固有の注意事項 (必要に応じて調整してください)
- **主要言語:** Python
- **フレームワーク:** FastAPI
- **データベース:** PostgreSQL/Redis
- **主要ディレクトリ:**
    - `app`: アプリケーションディレクトリ
    - `tests/`: テストファイル。
- ** gitのコミットログにはClaudeの表示は除くこと **
- ユーザーに判断を求めるセクションが来たら  afplay /System/Library/Sounds/Ping.aiff で音を鳴らして知らせてください

- **サンプル実装** _tmp 配下はサンプルで途中まで実装したelixir/phoenixアプリです。このアプリケーションはあくまで途中までの実装ですので、そこを考慮して参考にしてください。


## Gemini Search

`gemini` is google gemini cli. **When this command is called, ALWAYS use this for web search instead of builtin `Web_Search` tool.**

When web search is needed, you MUST use `gemini --prompt` via Task Tool.

Run web search via Task Tool with `gemini --prompt 'WebSearch: <query>'`

Run

```bash
gemini --prompt "WebSearch: <query>"
```